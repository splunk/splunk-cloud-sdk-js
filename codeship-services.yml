splunk-cloud-sdk-shared-token-fetcher:
  image: cloudrepo-docker-playground.jfrog.io/sdk/shared/token-fetcher:latest
  encrypted_env_file: ci/env.encrypted
  volumes:
    - ./okta:/okta

splunk-cloud-sdk-js-build:
  build:
    image: splunk/splunk-cloud-sdk-js-build
    dockerfile: ci/Dockerfile
  encrypted_env_file: ci/env.encrypted

splunk-cloud-sdk-js-with-stubby:
  build:
    image: splunk/splunk-cloud-sdk-js-with-stubby
    dockerfile: ci/Dockerfile
  encrypted_env_file: ci/env.encrypted
  environment:
    - CI=true
  depends_on:
    - splunk-cloud-sdk-shared-stubby

splunk-cloud-sdk-js-against-playground:
  build:
    image: splunk/splunk-cloud-sdk-js-against-playground
    dockerfile: ci/Dockerfile
  encrypted_env_file: ci/env.encrypted
  depends_on:
    - splunk-cloud-sdk-shared-token-fetcher
  volumes_from:
    - splunk-cloud-sdk-shared-token-fetcher
  environment:
    - CI=true

splunk-cloud-sdk-shared-stubby:
  image: cloudrepo-docker-playground.jfrog.io/sdk/shared/stubby:latest

splunk-cloud-sdk-js-whitesource:
  depends_on:
    - splunk-cloud-sdk-js-build
  encrypted_env_file: ci/env.encrypted
  image: cloudrepo-docker-playground.jfrog.io/sdk/shared/whitesource:latest
  volumes_from:
    - splunk-cloud-sdk-js-build