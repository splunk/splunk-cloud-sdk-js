- type: serial
  name: stubby
  steps:
    - name: build docs - TypeScript
      service: ssc-client-js-with-stubby
      command: bash -c "yarn ts:docs"
    - name: stubby tests with coverage - TypeScript
      service: ssc-client-js-with-stubby
      command: bash -c "yarn codecov"

- type: serial
  name: integration - TypeScript
  steps:
  - name: fetch Okta token
    service: ssc-sdk-shared-token-fetcher
    command: true
  - type: parallel
    name: integration tests & examples - TypeScript
    steps:
      - name: integration tests - gated
        service: ssc-client-js-against-playground
        command: bash -c "allow_failures=0 ./ci/integration/runtests.sh"
      - name: run examples - gated
        service: ssc-client-js-against-playground
        command: bash -c "allow_failures=0 ./ci/integration/runExamples.sh"