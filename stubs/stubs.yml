# Syntax at https://github.com/mrak/stubby4node#endpoint-configuration
-  request:
      url: /basic
      method: GET
      headers:
         Content-Type: application/json
         Authorization: Basic YWRtaW46Y2hhbmdlbWU=
   response:
      latency: 1 // Only here to remind me of the option
      status: 200
      body:
            foo: "bar"

-  request:
      url: /basic
      method: PUT
      headers:
         Content-Type: application/json
         Authorization: Basic YWRtaW46Y2hhbmdlbWU=
      json: '{"walrus":"carpenter"}'
   response:
      status: 200
      body:
            oysters: "sad"

-  request:
      url: /basic
      method: POST
      headers:
         Content-Type: application/json
         Authorization: Basic YWRtaW46Y2hhbmdlbWU=
      json: '{"robin":"hood"}'
   response:
      status: 200
      body:
            friar: "tuck"

-  request:
      url: /basic
      method: DELETE
      headers:
         Content-Type: application/json
         Authorization: Basic YWRtaW46Y2hhbmdlbWU=
   response:
      status: 204

- request:
      url: /error
  response:
    status: 500
    body:
      message: "Something exploded"

############################################################
## SEARCH
############################################################

- request:
      url: /jobs$
      method: POST
      json: '{"query": "search index=*"}'
      headers:
         Content-Type: application/json
         Authorization: Basic YWRtaW46Y2hhbmdlbWU=
  response:
      headers:
         Content-Type: application/json
      status: 200
      body:
        searchId: "SEARCH_ID"

- request:
      url: /jobs/sync$
      method: POST
      json: '{"query": "search index=*"}'
      headers:
         Content-Type: application/json
         Authorization: Basic YWRtaW46Y2hhbmdlbWU=
  response:
      headers:
         Content-Type: application/json
      status: 200
      file: 'oneshot_results.json'

- request:
      url: /search/v1/jobs/SEARCH_ID/results$
      method: GET
      headers:
         Content-Type: application/json
         Authorization: Basic YWRtaW46Y2hhbmdlbWU=
  response:
      headers:
         Content-Type: application/json
      status: 200
      file: 'oneshot_results.json'

- request:
      url: '*'
  response:
    status: 404
    body:
      message: "File not found"